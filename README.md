# Misa Rin

Misa Rin 是一款聚焦桌面端的现代化数字绘画与像素创作软件。界面基于 Fluent UI，在 **12MB** 的极致体积下，实现了秒级启动与媲美原生应用的流畅体验。

无论是速写、像素草图、UI 设计还是工业级赛璐璐平涂，都可以在一个统一的、无限边界的画布里完成。

<img width="1470" height="879" alt="image" src="https://github.com/user-attachments/assets/b524add6-66ab-4567-889c-9f9e076ec737" />

> 注意：项目仍处于早期开发阶段 (Alpha)，请勿将其用于关键生产项目。

---

## 核心亮点

- **极致轻量**：仅约 **12MB** 的包体大小，零依赖，秒启动，拒绝臃肿。
- **混合渲染引擎**：采用 **矢量流光栅化 (Deferred Rasterization)** 技术，绘画时享受矢量般的 120Hz 丝滑预览，松手即刻生成位图。
- **鼠标党福音**：内置 **速度-压力映射模型** 与 **自动尖锐出峰** 算法，配合带压感的贝塞尔曲线工具，无需数位板也能画出带有完美笔锋的线稿。
- **跨平台同构**：基于 Flutter 与 CanvasKit，在 Windows、macOS、Linux 与 Web 上提供完全一致的性能与交互体验。

## 最近更新（2026.0102）

- 新增“选区笔”工具：像画笔一样涂抹创建选区，可与现有选区叠加。
- 新增五角星笔尖与“随机旋转”开关（方形/三角形/五角星印章随机旋转）。
- 新增 StreamLine：抬笔后对矢量预览笔画做平滑重算，并以补间动画回弹到更顺的结果。
- 优化图层自由变换缩放锚点、图层重命名交互、画布大小锚点对比度与文本选择样式等细节体验。
- “打开项目”支持直接导入图片（PNG/JPG/JPEG/WEBP/AVIF）创建文档；发布工作流会将提交信息写入 Release 说明。

## 绘画与创作

- **专业笔刷引擎**：
    - **多形状笔尖**：原生支持圆形、三角形、正方形笔尖，满足像素画与硬边概括需求。
    - **物理开关**：支持一键“转换为擦除”模式，保留当前笔刷纹理进行擦除；支持独立开关“数位笔压”与“模拟笔压”。
    - **矢量作画**：可选开启矢量预览，提供绝对流畅的笔触反馈。
    - **空心描边/空心笔刷**：支持空心比例与“吃掉重叠部分”，快速画出干净的描边与线稿效果。
    - **透视辅助**：支持 1/2/3 点透视线与透视笔，绘制时可按透视方向吸附。
- **强大的文本工具**：支持 **横排/竖排** 文本输入，可自由调节字体、字号、行距、字间距，并支持 **文字描边 (Stroke)**，完美适应漫画嵌字与海报设计。
- **专注画布**：自研分块渲染 (Chunk-based Rendering) 引擎，支持无限尺寸画布、无限撤销/重做与多文档标签页管理。

## Retas 风格二值化工作流 (Industrial Workflow)

Misa Rin 致敬并重现了日本动画工业（PaintMan/Retas）的高效二值化生产流程，专为赛璐璐风格与像素艺术家打造：

1.  **非破坏性二值化**：支持全程使用锯齿（Aliased）线条作画与填色，彻底告别“油漆桶白边”与繁琐的容差调整。
2.  **色线吞并 (Color Trace Enclosure)**：面板内置红/绿/蓝/黑专用色线按钮，油漆桶填色时自动吞并色线（色トレス/Color Trace），实现工业级的高速分色。
3.  **后期边缘柔化渲染**：独家的 **二次算法边缘柔化** 功能，允许在导出时将二值化画面一键渲染为平滑且保留线条密度的高清插画。

## 图像处理与滤镜

内置轻量级图像处理管线，无需导出即可完成后期调整：
- **基础调整**：色相/饱和度 (HSB)、亮度/对比度、黑白、二值化、颜色反转。
- **线稿处理**：扫描纸绘（纸白转透明，提取黑/红/绿/蓝线条，可调黑/白点与中间调）、去除漏色。
- **形态学工具**：线条收窄、填色拉伸。
- **颜色处理**：色彩范围（减色/分色效果，支持实时预览）。
- **特效滤镜**：高斯模糊 (Gaussian Blur)。
- **渲染控制**：可调节等级的边缘柔化 (Anti-aliasing) 滤镜。

## 视图与辅助

- **视图旋转**：旋转工具可自由旋转画布视图并一键复位（不影响实际像素）。
- **专注辅助**：像素网格、镜像预览、黑白预览。
- **画布变换**：支持画布旋转 90°/180°、图像大小与画布大小调整、图层自由变换。

## 导入与导出

- **文件格式**：支持保存为 `.rin`；导入/导出 PSD（保留图层结构）。
- **导出**：PNG（倍率与导出前边缘柔化）、SVG（自动矢量化，最大颜色数/路径简化可调）。
- **素材与色彩**：支持拖拽/剪贴板导入图片；从画布取色生成调色盘与渐变调色盘，并支持导入/导出调色盘；支持参考图像面板。

## 获取与体验

- **桌面版 (推荐)**：前往 [Releases](https://github.com/MCDFsteve/MisaRin/releases) 下载最新安装包。
    - *适用于生产环境，支持多线程处理与本地文件管理。*
- **网页版**：访问 https://misarin.aimes-soft.com
    - *适用于即时体验与轻量摸鱼，无需安装。*

## 快速上手

1.  启动应用后，通过“新建”向导创建画布，或直接从 **剪贴板/拖拽** 导入图像创建新画布（也支持导入 PSD）。
2.  如需自行构建，请确保安装 Flutter 3.9+：
    ```bash
    flutter pub get
    flutter run -d <windows|macos|linux>
    ```

> 提示：支持切换 **SAI2 工作区布局**，老用户可零成本迁移；macOS 版本会自动挂载原生系统菜单。

## 个性化

- 支持 亮色 / 暗色 / 跟随系统 主题切换。
- 支持语言切换（跟随系统 / 中文 / English / 日本語 / 한국어）。
- 可自定义界面缩放与画布手势灵敏度。
- 可选显示 FPS/性能脉冲浮层，便于定位卡顿与性能问题。

## 反馈与参与

Misa Rin 致力于探索 Flutter 在高性能图形领域的极限。

- 欢迎通过 Issue/PR 分享你的创意、提出 Bug。
- 如果你是日本动画流程的爱好者或开发者，欢迎通过 Discussion 探讨 Retas 工作流的改进。
- *Keywords for developers: Flutter, CanvasKit, Pixel Art, Cel Shading, Retas, PaintMan, Color Trace (色トレス), Binary Pen (二值化ペン).*

本项目使用 **MIT License** 开源，随意下载、修改、分享与魔改。
